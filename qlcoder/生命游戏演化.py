#!/usr/bin/env python
# -*- coding: utf-8 -*-
# @Time    : 2017/11/25 11:13
# @Author  : GooZy
import copy
import sys

map = """
................................................................................................
................................................................................................
................................................................................................
................................................................................................
................................................................................................
................................................................................................
................................................................................................
................................................................................................
................................................................................................
................................................................................................
................................................................................................
................................................................................................
................................................................................................
................................................................................................
................................................................................................
................................................................................................
........................................**......................................................
.......................................**.......................................................
........................................*.......................................................
................................................................................................
................................................................................................
................................................................................................
................................................................................................
................................................................................................
................................................................................................
................................................................................................
................................................................................................
................................................................................................
................................................................................................
................................................................................................
................................................................................................
................................................................................................
................................................................................................
................................................................................................
................................................................................................
................................................................................................
"""


def show_map(a_map, round):
    for each in a_map:
        print(''.join(each))
    cnt = 0
    for x in a_map:
        for y in x:
            cnt += (y == '*')
    print('迭代次数：' + str(round))
    print('存活数：' + str(cnt))


def process(a, b):
    for x in range(len(a)):
        for y in range(len(a[x])):
            cnt = 0
            for i in range(-1, 2):
                for j in range(-1, 2):
                    if abs(i) + abs(j) > 0:
                        nx = x + i
                        ny = y + j
                        if nx >= 0 and nx < len(a) and ny >= 0 and ny < len(a[x]) and b[nx][ny] == '*':
                            cnt += 1
            if cnt < 2 or cnt > 3:
                a[x][y] = '.'
            elif a[x][y] == '.' and cnt == 3:
                a[x][y] = '*'


if __name__ == '__main__':
    a_map = [each for each in map.split()]
    for i in range(len(a_map)):
        a_map[i] = [each for each in a_map[i]]
    b_map = copy.deepcopy(a_map)
    rnd = 0
    while True:
        show_map(a_map, rnd)
        process(a_map, b_map)
        b_map = copy.deepcopy(a_map)
        judge = raw_input('是否进行下一轮？(按任意键继续，q退出)')
        if judge.lower() == 'q':
            break
        sys.stdout.write('\033[2J')
        rnd += 1